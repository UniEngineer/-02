<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>3D Viewer</title>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        #container { text-align: center; padding: 20px; }
        #viewer { width: 100%; height: 70vh; }
    </style>
</head>
<body>
    <div id="container">
        <h1>ВИЗГЛТ-25Н</h1>
        <p id="status">Загрузка...</p>
        <div id="viewer"></div>
    </div>

    <!-- Three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
    
    <script>
        // Проверяем, открыто ли в Telegram WebApp
        if (window.Telegram && Telegram.WebApp) {
            const tgWebApp = Telegram.WebApp;
            tgWebApp.expand(); // Раскрываем на весь экран
            
            // Показываем данные от бота (если есть)
            const initData = tgWebApp.initData || {};
            document.getElementById('status').textContent = "Готов к работе!";

            // Здесь можно обработать данные от бота
            if (initData.model) {
                loadModel(initData.model);
            } else {
                document.getElementById('status').textContent = "Отправьте модель через бота!";
            }
        } else {
            document.getElementById('status').textContent = "Откройте через Telegram-бота!";
        }

        function loadModel(url) {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('viewer').appendChild(renderer.domElement);

            const loader = new THREE.GLTFLoader();
            loader.load(url, (gltf) => {
                scene.add(gltf.scene);
                camera.position.z = 5;
                animate();
            });

            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
        }
    </script>
</body>
</html>